<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="fatjar" name="Buddi">
	<property environment="env"/>
	
	<property name="BUDDI_HOME" value="/Users/wyatt/Documents/Programming/Workplace/Buddi"/>
	<property name="FATJAR_PATH" value="/Applications/Eclipse/plugins/net.sf.fjep.fatjar_0.1.0/fatjar.jar"/>
	
	<!-- Define the classpath for this build.  Needed for the jarring. -->
	<path id="Buddi.classpath">
		<pathelement location="bin"/>
		<pathelement location="lib/jfreechart-1.0.1.jar"/>
		<pathelement location="lib/jcommon-1.0.5.jar"/>
		<pathelement location="lib/quaqua-3.6.11.jar"/>
		<pathelement location="lib/jcalendar-1.3.2.jar"/>
		<pathelement location="lib/emf/emf.ecore.xmi_2.2.1.v200609210005.jar"/>
		<pathelement location="lib/emf/emf.ecore_2.2.1.v200609210005.jar"/>
		<pathelement location="lib/emf/emf.common_2.2.1.v200609210005.jar"/>
		<pathelement location="lib/BrowserLauncher2-10rc4.jar"/>
		<pathelement location="lib/MRJAdapter-1.0.9.jar"/>
		<pathelement location="lib/truefilter-1.2.jar"/>
		<pathelement location="lib/moss-0.5.2.jar"/>
		<pathelement location="lib/retroweaver-rt-2.0Beta2.jar"/>
	</path> 

	<!-- Define the tasks and associated classes for FatJar -->
	<taskdef name="fatjar.build" classname="net.sf.fjep.anttask.FJBuildTask" classpath="${FATJAR_PATH}" loaderref="${FATJAR_PATH}"/>
	<typedef name="fatjar.manifest" classname="net.sf.fjep.anttask.FJManifestType" classpath="${FATJAR_PATH}" loaderref="${FATJAR_PATH}"/>
	<typedef name="fatjar.exclude" classname="net.sf.fjep.anttask.FJExcludeType" classpath="${FATJAR_PATH}" loaderref="${FATJAR_PATH}"/>
	<typedef name="fatjar.jarsource" classname="net.sf.fjep.anttask.FJJarSourceType" classpath="${FATJAR_PATH}" loaderref="${FATJAR_PATH}"/>
	<typedef name="fatjar.filesource" classname="net.sf.fjep.anttask.FJFileSourceType" classpath="${FATJAR_PATH}" loaderref="${FATJAR_PATH}"/>
	<typedef name="fatjar.autojar" classname="net.sf.fjep.anttask.FJAutoJarType" classpath="${FATJAR_PATH}" loaderref="${FATJAR_PATH}"/>
	<typedef name="fatjar.class" classname="net.sf.fjep.anttask.FJClassType" classpath="${FATJAR_PATH}" loaderref="${FATJAR_PATH}"/>
	
	<target depends="jar" name="fatjar">
		<fatjar.build output="Buddi.jar">
			<fatjar.manifest mainclass="org.homeunix.drummer.Buddi"/>
			<!-- This is the skinny jar file, just compiled below -->
			<fatjar.jarsource file="${BUDDI_HOME}/Buddi-base.jar" relpath=""/>

			<!-- These are the resource jars, containing images, documents, languages, etc -->
			<fatjar.jarsource file="${BUDDI_HOME}/Buddi-documents.jar" relpath=""/>
			<fatjar.jarsource file="${BUDDI_HOME}/Buddi-languages.jar" relpath=""/>
			<fatjar.jarsource file="${BUDDI_HOME}/Buddi-licenses.jar" relpath=""/>
			<fatjar.jarsource file="${BUDDI_HOME}/Buddi-resources.jar" relpath=""/>
			
			<!-- These are all the included files which normally would go on the classpath -->
            <fatjar.jarsource file="${BUDDI_HOME}/lib/BrowserLauncher2-10rc4.jar" relpath=""/> 
            <fatjar.jarsource file="${BUDDI_HOME}/lib/MRJAdapter-1.0.9.jar" relpath=""/>
            <fatjar.jarsource file="${BUDDI_HOME}/lib/emf/emf.common_2.2.1.v200609210005.jar" relpath=""/>
            <fatjar.jarsource file="${BUDDI_HOME}/lib/emf/emf.ecore.xmi_2.2.1.v200609210005.jar" relpath=""/>
            <fatjar.jarsource file="${BUDDI_HOME}/lib/emf/emf.ecore_2.2.1.v200609210005.jar" relpath=""/>
            <fatjar.jarsource file="${BUDDI_HOME}/lib/jcalendar-1.3.2.jar" relpath=""/>
            <fatjar.jarsource file="${BUDDI_HOME}/lib/jcommon-1.0.5.jar" relpath=""/>
            <fatjar.jarsource file="${BUDDI_HOME}/lib/jfreechart-1.0.1.jar" relpath=""/>
            <fatjar.jarsource file="${BUDDI_HOME}/lib/moss-0.5.2.jar" relpath=""/>
            <fatjar.jarsource file="${BUDDI_HOME}/lib/truefilter-1.2.jar" relpath=""/>
		</fatjar.build>
	</target>

	<target name="compile">
		<javac srcdir="src" destdir="bin" classpath=""/>
	</target>

	<target name="clean">
		<delete>
			<fileset dir=".">
				<include name="*.jar"/>
			</fileset>
		</delete>
	</target>
	
	<target name="jar" depends="clean,compile">
		<jar destfile="Buddi-base.jar" basedir="bin" includes="**/*.class" />
		<jar destfile="Buddi-languages.jar" basedir="Languages" includes="**/*.lang" />
		<jar destfile="Buddi-documents.jar" basedir="Documents" includes="**/*.txt" />
		<jar destfile="Buddi-licenses.jar" basedir="Licenses" includes="**/*.txt" />
		<jar destfile="Buddi-resources.jar" basedir="Resources" includes="**/*" />
	</target>
</project>
